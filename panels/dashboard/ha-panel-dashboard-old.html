<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">

<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">

<link rel="import" href="../../bower_components/vaadin-date-picker/vaadin-date-picker.html">

<link rel="import" href="../../src/components/ha-menu-button.html">
<link rel="import" href="../../src/resources/ha-style.html">

<script src="../../bower_components/snap.svg/dist/snap.svg-min.js"></script>

<dom-module id="ha-panel-dashboard">
  <template>
    <style include="ha-style">
      #svgout {
        width: 100%;
        height: calc(100% - 64px);
        z-index: 0;
      }
    </style>




    <app-toolbar>
      <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>
      <div main-title>Dashboard</div>
    </app-toolbar>


    <svg id="svgout"></svg>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'ha-panel-dashboard',

    properties: {
      hass: {
        type: Object,
      },
      panel: {
        type: Object,
      },
      image_url: {
        type: String,
        computed: '_computeImageUrl(panel)',
      },
    },
    _computeImageUrl: function (panel) {
      var url = window.location.origin + '/local/' + panel.config.svgimage;

      return url
    },
    attached: function () {
      var s = Snap(this.$["svgout"]);
      var tux = Snap.load(this.image_url, function (loadedFragment) {
        var b = s.append(loadedFragment);
        var bbox = b.getBBox();
        var vbox = bbox.x + " " + bbox.y + " " + bbox.width + " " + bbox.height; s.attr({ viewBox: vbox, preserveAspectRatio: "xMinYMid meet"  });
        debugger

      });
      //console.log("TUX",tux.attr)
      // s.attr({ preserveAspectRatio: "xMinYMid meet" });

      // var r = s.rect(100, 200, 100, 100, 20, 20).attr({ stroke: '#123456', 'strokeWidth': 20, fill: 'red', 'opacity': 0.2 });
      // var t = s.text(100, 50, 'Snap("#svg") should reference an svg element, not a div. Or create it by supplying width,height Snap(100,100)');

      debugger
      return;
    },
  });

</script>